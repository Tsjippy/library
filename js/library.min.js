(()=>{"use strict";console.log("library.js loaded"),document.addEventListener("DOMContentLoaded",function(){}),document.addEventListener("click",e=>{let t=e.target;t.matches(".add-book")?async function(e){let t=e.closest("td"),a=e.closest("tr"),o=new FormData;a.querySelectorAll("input, textarea").forEach(e=>o.append(e.name,e.value)),a.querySelectorAll("td > img").forEach(e=>o.append("image",e.src)),console.log(e),e.classList.add("hidden"),t.querySelector(".loadergif_wrapper").classList.remove("hidden");let s=await FormSubmit.fetchRestApi("library/add_book",o);s?(console.log(s),t.innerHTML=s,Main.displayMessage(s.message)):(e.classList.remove("hidden"),t.querySelector(".loadergif_wrapper").classList.add("hidden"))}(t):t.matches(".delete-book")&&t.remove(),t.classList.contains("add_cat")&&document.getElementById("add_"+t.dataset.type+"_type").classList.remove("hidden"),t.matches(".add_category .form_submit")&&async function(e){let t=await FormSubmit.submitForm(e,"frontend_posting/add_category");if(t){e.closest("form").querySelector('[name="cat_parent"]').value;let a=e.closest("form").querySelector('[name="post_type"]').value,o=e.closest("form").querySelector('[name="cat_name"]').value,s=`\n\t\t<div class="infobox" undefined>\n\t\t\t<input type="checkbox" class="${a}type" id="${a}type[]" value="${t.id}" checked>\n\t\t\t<label class="option-label category-select">${o}</label>\n\t\t</div>\n\t\t`;(void 0).insertAdjacentHTML("afterBegin",s),Main.hideModals(),Main.displayMessage(`Succesfully added the ${o} category`)}}(t)})})();
//# sourceMappingURL=library.min.js.map